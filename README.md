# 惊天背单词（原二次元风格 CET-6 背单词站点）

## 已实现功能

- 远程获取最新开放 CET-6 词库 (GitHub raw) + 本地 7 天缓存（可刷新）
- 构建期数据切片 (scripts/generateDataset.mjs) 输出 `public/cet6/chunk-*.json` + manifest，运行 `npm run build` 前自动执行
- 运行时按需加载分块（存在切片优先使用，否则回退在线解析）
- Web Worker 后台解析（失败回退主线程）
- 分页懒加载 / 分块前端增量展示
- 搜索（300ms 防抖），收藏筛选（仅收藏）
- 收藏/导出/导入/清空收藏
- 发音 (SpeechSynthesis) + 英/美音选择 + 批量朗读前 20 词
- 高级 SRS：SM‑2 风格算法 (E-Factor、动态间隔) 取代旧固定表，质量评分快捷键 0–5
- 复习模式（到期词循环 + 质量 0–5 按钮）
- 正向测试（中文首义项判断 -> 质量映射）
- 反向拼写测试（中文→英文，Levenshtein 容错评分）
- 统计面板（等级分布、收藏、掌握）+ 14 日复习条形微图
- 深浅色主题切换，二次元渐变风格 UI
- PWA Manifest + 基础 Service Worker (静态与数据分块缓存)
- 高级搜索模式：普通 / 模糊 / 正则 + 词根简易匹配
- 日目标设置 + 进度条 + 浏览器提醒 (Notification API 简易提醒)

## 后续可扩展

- 更高级搜索：模糊权重排名 / 正则 / 词根派生匹配
- FSRS 参数调优或自适应（目前为简化 SM‑2 实现）
- 例句/图片/词根助记强化
- 多设备同步（IndexedDB + 云端备份）
- 学习任务/每日目标提醒 (Notification API)
- 更丰富统计：回忆率、遗忘曲线拟合、EF 分布
- 国际化 UI、多词库扩展（四级 / 雅思 / 托福）

## 运行

```powershell
npm install
npm run dev
```

浏览器访问终端提示地址 (默认 <http://localhost:5173>)。首次会尝试联网抓取词库，若网络失败使用内置少量后备词。

## 数据缓存说明

- 词库缓存：localStorage `cet6_words_v1` / 时间戳 `cet6_words_v1_time`
- 进度 (新版本)：`cet6_progress_v2` （自动迁移旧 v1，增加 EF/interval/lastReview）
- 收藏：`cet6_fav_v1`
刷新词库按钮会清除词库缓存（不影响进度/收藏）。如存在构建期切片，将优先使用分块文件。

## 隐私

所有学习数据仅存于浏览器 localStorage，不上传服务器。

## 发音

使用浏览器内置 SpeechSynthesis ，支持英/美音切换与批量（前 20 词）朗读。浏览器首次可能需要等待声源列表加载。

## 贡献

欢迎提出改进想法（性能、算法、UI、可访问性等）。

## 高级搜索使用说明

- 普通：子串匹配（可开启“词根”去除常见后缀提升召回）。
- 模糊：bigram + 简易 Levenshtein 打分，适合拼写不确定。结果按相似度排序。
- 正则：输入正则模式（例如 `^re.*`）。如需完整 JS 正则可直接写表达式主体（不含两侧 `/`）。

## SRS 质量评分指南

0 完全不会 / 空白；1 回忆失败有印象；2 犹豫后错误；3 犹豫后正确；4 基本熟悉；5 秒回非常熟练。

## 日目标与提醒

- 输入框设置每日“正确记忆”目标数(默认30)。
- 复习/测试/拼写时质量 ≥3 计入完成值。
- “提醒”按钮安排一个 30 分钟后的一次性浏览器通知（若目标未达成且授权允许）。
